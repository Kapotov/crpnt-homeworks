# Домашнее задание к занятию "Построение сетей дата-центра"

### Цель задания

В результате выполнения этого задания вы научитесь собирать простую underlay сеть ДЦ на основе протокола BGP.

------

### Инструкция к выполнению домашнего задания

1. Скачайте [Шаблон для домашнего задания](https://u.netology.ru/backend/uploads/lms/content_assets/file/281/%D0%A1%D0%94%D0%95%D0%9B%D0%90%D0%99%D0%A2%D0%95_%D0%9A%D0%9E%D0%9F%D0%98%D0%AE_-_%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%B4%D0%BB%D1%8F_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F_1.1._%D0%9D%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8_-_%D0%A4%D0%B0%D0%BC%D0%B8%D0%BB%D0%B8%D1%8F_%D0%98%D0%BC%D1%8F.docx) на своё устройство.
2. Откройте скачанный файл на личном диске в Google.
3. В названии файла введите корректное название лекции и ваши фамилию и имя.
4. Зайдите в «Настройки доступа» и выберите доступ «Просматривать могут все в интернете, у кого есть ссылка». Инструкция «Как предоставить доступ к файлам и папкам на Google Диске» [по ссылке](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop).
5. Скопируйте текст задания в свой документ.
6. Выполните задание, запишите ответы и приложите необходимые скриншоты в свой Google-документ.
7. Для проверки домашнего задания отправьте ссылку на ваш Google-документ в личном кабинете.
8. Любые вопросы по решению задач можно задать в чате учебной группы, в чате поддержки или в разделе «Вопросы по заданию» в личном кабинете.
9. Подробнее о работе с Google-документами и загрузке решения на проверку можно найти в [«Руководстве по работе с материалами для обучения»](https://l.netology.ru/instruktsiya-po-materialami-dlya-obucheniya)

---

### Лабораторная работа "Построение сетей Дата Центра"

### Задание 1

![image](https://user-images.githubusercontent.com/77394491/175958359-1d8ca2c3-3cbe-4c51-a0dc-2c64fbb1a4d6.png)


Для указанной топологии необходимо настроить маршрутизацию eBGP для underlay сети DC.  

Номера AS используйте из топологии. Адресацию стыковочных линков и импортируемых сетей выберите на свое усмотрение.  
!!! Важно, чтобы в сети были доступны по BGP 2 разных маршрута до каждой клиентской сети через разные spine.  
Количество подключенных конечных хостов можно не соблюдать, достаточно двух.


*Отправьте полный список конфигураций: каждого leaf и spine маршрутизаторов.*
# Ответ 
```
Наша топология включает в себя два маршрутизатора “spine” (spine5 и spine6) в AS65000 и четыре маршрутизатора “leaf”
(Leaf1 до Leaf4) в разных автономных системах (AS65001 - AS65004). Каждый маршрутизатор “leaf” подключен к двум хостам.
Вот пример конфигурации eBGP для маршрутизатора:
# Конфигурация для Leaf1
router bgp 65001
  bgp log-neighbor-changes
  neighbor 10.0.0.1 remote-as 65000
  network 192.168.1.0 mask 255.255.255.0

# Конфигурация для Leaf2
router bgp 65002
  bgp log-neighbor-changes
  neighbor 10.0.0.3 remote-as 65000
  network 192.168.2.0 mask 255.255.255.0

# Конфигурация для Leaf3
router bgp 65003
  bgp log-neighbor-changes
  neighbor 10.0.0.5 remote-as 65000
  network 192.168.3.0 mask 255.255.255.0

# Конфигурация для Leaf4
router bgp 65004
  bgp log-neighbor-changes
  neighbor 10.0.0.7 remote-as 65000
  network 192.168.4.0 mask 255.255.255.0

# Конфигурация для spine5
router bgp 65000
  bgp log-neighbor-changes
  neighbor 10.0.0.2 remote-as 65001
  neighbor 10.0.0.4 remote-as 65002
  neighbor 10.0.0.6 remote-as 65003
  neighbor 10.0.0.8 remote-as 65004
  network 10.0.0.0 mask 255.255.255.0

# Конфигурация для spine6
router bgp 65000
  bgp log-neighbor-changes
  neighbor 10.0.0.2 remote-as 65001
  neighbor 10.0.0.4 remote-as 65002
  neighbor 10.0.0.6 remote-as 65003
  neighbor 10.0.0.8 remote-as 65004
  network 10.0.0.0 mask 255.255.255.0

В этом примере я использую адресацию стыковочных линков 10.0.0.1/24 для spine5 и 10.0.0.2/24 для Leaf1,
10.0.0.3/24 для spine5 и 10.0.0.4/24 для Leaf2, и так далее. Я также анонсирую сети
192.168.1.0/24 из Leaf1, 192.168.2.0/24 из Leaf2, и так далее.

Пожалуйста, учтите, что это простой пример, в реальной жизни потребуется дополнительная настройка для полной
реализации указанной топологии, включая настройку iBGP или других протоколов IGP для обеспечения связности внутри
сети. Кроме того, потребуется настроить политики маршрутизации BGP для обеспечения двух разных путей до каждой
клиентской сети через разные маршрутизаторы “spine”.

```
## Дополнительное задание (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 2*

Настройте ECMP для балансировки трафика в Underlay сети по линкам до разных spine

*Отправьте полный список конфигураций, где для соответствующей AF включена балансировка.*
# Ответ
```
Для настройки ECMP (Equal-Cost Multi-Path) в BGP, я могу использовать команду maximum-paths,
которая позволяет BGP установить несколько путей с одинаковой стоимостью до одного и того же
пункта назначения в таблице маршрутизации.

Вот пример конфигурации eBGP с включенной балансировкой ECMP для всех маршрутизаторов в нашей топологии:
# Конфигурация для Leaf1
router bgp 65001
  bgp log-neighbor-changes
  maximum-paths 2
  neighbor 10.0.0.1 remote-as 65000
  network 192.168.1.0 mask 255.255.255.0

# Конфигурация для Leaf2
router bgp 65002
  bgp log-neighbor-changes
  maximum-paths 2
  neighbor 10.0.0.3 remote-as 65000
  network 192.168.2.0 mask 255.255.255.0

# Конфигурация для Leaf3
router bgp 65003
  bgp log-neighbor-changes
  maximum-paths 2
  neighbor 10.0.0.5 remote-as 65000
  network 192.168.3.0 mask 255.255.255.0

# Конфигурация для Leaf4
router bgp 65004
  bgp log-neighbor-changes
  maximum-paths 2
  neighbor 10.0.0.7 remote-as 65000
  network 192.168.4.0 mask 255.255.255.0

# Конфигурация для spine5
router bgp 65000
  bgp log-neighbor-changes
  maximum-paths 4
  neighbor 10.0.0.2 remote-as 65001
  neighbor 10.0.0.4 remote-as 65002
  neighbor 10.0.0.6 remote-as 65003
  neighbor 10.0.0.8 remote-as 65004
  network 10.0.0.0 mask 255.255.255.0

# Конфигурация для spine6
router bgp 65000
  bgp log-neighbor-changes
  maximum-paths 4
  neighbor 10.0.0.2 remote-as 65001
  neighbor 10.0.0.4 remote-as 65002
  neighbor 10.0.0.6 remote-as 65003
  neighbor 10.0.0.8 remote-as 65004
  network 10.0.0.0 mask 255.255.255.0

В этом примере я использую команду maximum-paths 2 для маршрутизаторов “leaf” и maximum-paths 4 для маршрутизаторов “spine”,
чтобы разрешить балансировку трафика по нескольким путям с одинаковой стоимостью
```

### Правила приема домашнего задания

В личном кабинете отправлены:

- ссылка на документ (Google Doc) с выполненным заданием. В документе настроены права доступа “Просматривать могут все в Интернете, у кого есть ссылка”;
- файл в формате .png или .jpg.

### Критерии оценки

Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты и файлы проекта, в выполненных заданиях нет противоречий и нарушения логики.

На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки.
